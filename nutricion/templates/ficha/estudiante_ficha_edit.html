{% extends 'paginaweb/base.html' %}
{% load manifest %}
{% load static %}
{% block content %}
    {% block extra_css %}  
    {% endblock extra_css %}
<div class="col-md-12">
    <p id="profile_title" class="mb-2 text-blue text-center">Inicio > Administrar Fichas > {{paciente_data.nombre}} > Editar ficha</p>
    <h2 class='h2 medium text-blue'>Editar ficha</h2>
    <form method="POST" action="{% url 'ficha_update' paciente_data.id ficha_data.id %}">{% csrf_token %}
        <div id="Fichaform">
            <div id="ficha-container" class="container-fluid">
                <h4>Paciente</h4>
                <div class="row">
                    <div class="col-sm">
                        <label for="nombre_paciente" class="form-label col-form-label-sm">Nombre completo:</label>
                        <input type="text" class="form-control form-control-sm" name="nombre_paciente" id="nombre_paciente" placeholder="Nombre" value="{{paciente_data.nombre}}"  disabled>
                        <label for="Email" class="form-label col-form-label-sm">Email:</label>
                        <input type="email" class="form-control form-control-sm" name="email" id="email" placeholder="@email.com" value="{{paciente_data.email}}"  disabled>
                        <label for="fecha_nac" class="form-label col-form-label-sm">Fecha nacimiento:</label>
                        <input type="text" class="form-control form-control-sm" name="" id="fecha_nac" value="{{paciente_data.fecha_nacimiento}}"  disabled>
                    </div>
                    <div class="col-sm">
                        <div class="row">
                            <div class="col-9">
                                <label for="rut" class="form-label col-form-label-sm">Rut paciente:</label>
                                <input type="text" class="form-control form-control-sm" name="rut" id="rut" placeholder="12345678" value="{{paciente_data.rut}}"  disabled>
                            </div>
                            <div class="col-3">
                                <label for="dv" class="form-label col-form-label-sm">DV:</label>
                                <input type="text" class="form-control form-control-sm" name="dv" id="dv" placeholder="K" value="{{paciente_data.dv}}"  disabled>
                            </div>
                        </div>
                        <label for="disciplina" class="form-label col-form-label-sm">Disciplina:</label>
                        <input type="text" class="form-control form-control-sm" name="disciplina" id="disciplina" placeholder="Disciplina" value="{{paciente_data.disciplina}}"  disabled>
                        <label for="genero" class="form-label col-form-label-sm">Género:</label>
                        <input type="text" class="form-control form-control-sm" name="genero" id="genero" placeholder="Genero" value="{{paciente_data.genero}}"  disabled>
                    </div>  
                </div>
            </div>
            <div id="ficha-container" class="container-fluid">
                <hr>
                <h4>Detalle atencion</h4>
                <div class="row">
                    <div class="col-sm">
                        <label for="estatura" class="form-label col-form-label-sm">Estatura (cm):</label>
                        <!-- <input type="text" step="0.01" inputmode="decimal" class="form-control form-control-sm" name="estatura" id="estatura"   required > -->
                        <!-- <input type="text" inputmode="decimal" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');"   class="form-control form-control-sm" name="estatura" id="estatura" value="{{ficha_data.estatura}}" /> -->
                        <label for="peso_prom" class="form-label col-form-label-sm">Peso promedio (kg):</label>
                        <input type="text" class="form-control form-control-sm" name="peso_prom" id="peso_prom" value="{{ficha_data.peso_prom}}" required>
                        <label for="prom_circunferencia_cin" class="form-label col-form-label-sm">Promedio circunferencia cintura  (cm):</label>
                        <input type="text" class="form-control form-control-sm" name="prom_circunferencia_cin" id="prom_circunferencia_cin"  value="{{ficha_data.prom_circunferencia_cin}}"  placeholder="{{ficha_data.prom_circunferencia_cin}}"  >
                        <label for="prom_circunferencia_braq" class="form-label col-form-label-sm">Promedio circunferencia braquial (cm):</label>
                        <input type="text" class="form-control form-control-sm" name="prom_circunferencia_braq" id="prom_circunferencia_braq" value="{{ficha_data.prom_circunferencia_braq}}"  placeholder="{{ficha_data.prom_circunferencia_braq}}" >
                        <label for="prom_pliegue_t" class="form-label col-form-label-sm">Promedio pliegue triciptal (PT) (mm):</label>
                        <input type="text" class="form-control form-control-sm" name="prom_pliegue_t" id="prom_pliegue_t" value="{{ficha_data.prom_pliegue_t}}"  placeholder="{{ficha_data.prom_pliegue_t}}" >
                        <label for="prom_pliegue_b" class="form-label col-form-label-sm">Promedio pliegue biciptal (PB) (mm):</label>
                        <input type="text" class="form-control form-control-sm" name="prom_pliegue_b" id="prom_pliegue_b" value="{{ficha_data.prom_pliegue_b}}"  placeholder="{{ficha_data.prom_pliegue_b}}" > 
                    </div> 
                    <div class="col-sm">
                        <label for="prom_pliegue_se" class="form-label col-form-label-sm">Promedio pliegue subescapular (PSE) (mm):</label>
                        <input type="text" class="form-control form-control-sm" name="prom_pliegue_se" id="prom_pliegue_se" value="{{ficha_data.prom_pliegue_se}}"  placeholder="{{ficha_data.prom_pliegue_se}}" >
                        <label for="prom_pliegue_si" class="form-label col-form-label-sm">Promedio pliegue suprailíaco (PSI) (mm):</label>
                        <input type="text" class="form-control form-control-sm" name="prom_pliegue_si" id="prom_pliegue_si" value="{{ficha_data.prom_pliegue_si}}"  placeholder="{{ficha_data.prom_pliegue_si}}" >
                        <label for="sum_pliegues" class="form-label col-form-label-sm">Sumatoria de pliegues:</label>
                        <input type="text" class="form-control form-control-sm" name="sum_pliegues" id="sum_pliegues" value="{{ficha_data.sum_pliegues}}"  placeholder="{{ficha_data.sum_pliegues}}" >
                        <label for="porc_grasa" class="form-label col-form-label-sm">Porcentaje de grasa (%):</label>
                        <input type="text" class="form-control form-control-sm" name="porc_grasa" id="porc_grasa" value="{{ficha_data.porc_grasa}}"  placeholder="{{ficha_data.porc_grasa}}" >
                        <label for="diag_nutri" class="form-label col-form-label-sm">Diagnóstico nutricional:</label>
                        <textarea name="diag_nutri" id="diag_nutri" class="form-control form-control-sm" rows="5" cols="50">{{ficha_data.diag_nutri}}</textarea>
                    </div>
                </div>
                <hr>
                <h4>Opcionales</h4>
                <div class="row">
                    <div class="col-sm">
                        <label for="prom_pliegue_abd" class="form-label col-form-label-sm">Promedio pliegue abdominal (mm):</label>
                        <input type="text" class="form-control form-control-sm" name="prom_pliegue_abd" id="prom_pliegue_abd" value="{{ficha_data.prom_pliegue_abd}}" placeholder="{{ficha_data.prom_pliegue_abd}}" >
                        <label for="prom_pliegue_pant" class="form-label col-form-label-sm">Promedio pliegue pantorilla (mm):</label>
                        <input type="text" class="form-control form-control-sm" name="prom_pliegue_pant" id="prom_pliegue_pant" value="{{ficha_data.prom_pliegue_pant}}"  placeholder="{{ficha_data.prom_pliegue_pant}}" >
                    </div>
                    <div class="col-sm">
                        <label for="prom_pliegue_media" class="form-label col-form-label-sm">Promedio pliegue medio (mm):</label>
                        <input type="text" class="form-control form-control-sm" name="prom_pliegue_media" id="prom_pliegue_media" value="{{ficha_data.prom_pliegue_media}}"  placeholder="{{ficha_data.prom_pliegue_media}}" >
                        <label for="prom_pliegue_supra" class="form-label col-form-label-sm">Promedio pliegue supraespinal (mm):</label>
                        <input type="text" class="form-control form-control-sm" name="prom_pliegue_supra" id="prom_pliegue_supra" value="{{ficha_data.prom_pliegue_supra}}"  placeholder="{{ficha_data.prom_pliegue_supra}}" >
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm">
                        <label for="recomendacion" class="form-label col-form-label-sm">Recomendación:</label>
                        <textarea name="recomendacion" id="recomendacion" class="form-control form-control-sm" rows="5" cols="50">{{ficha_data.recomendacion}}</textarea>
                    </div>
                </div>
            </div>
        </div>
        <div id="ficha-buttons">
            <div id="form-button">
                <button id="form-button" type="submit" class="button">Guardar</button>
            </div>
            <div id="form-button">
                <a href="{% url 'ficha_paciente_list' paciente_data.id %}" id="form-button" class=" button">Regresar</a>
            </div> 
        </div>
    </form>
</div>
{% endblock %}

<!-- <input type="text" >
<input type="text" class="separadorDecimal">

<script>
    var separadorDecimal=document.querySelectorAll(".separadorDecimal");
    for(e of separadorDecimal)
    {
        e.addEventListener("keyup",entrada,false);
    }
    
    function entrada(evt)
    {
        var res=evt.target.value.replace(/\./g,",");
        evt.path[0].value=res;
    }
</script> -->